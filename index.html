<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Track Consignment</title>
</head>
<body>
    <h1>Redirecting to Mainstream...</h1>
    <p>Your tracking number will be populated automatically.</p>

    <script>
        // Simulating retrieval of tracking number from Mintsoft
        const trackingNumber = "{0}"; // This will be replaced with the actual tracking number by the server-side code

        // Mainstream tracking URL
        const mainstreamUrl = "https://www.mainstream.co.nz/actions/Mainstream/API/ConsignmentStatus";

        // Creating a form programmatically
        const form = document.createElement("form");
        form.method = "POST";
        form.action = mainstreamUrl;

        // CSRF Token
        const csrfToken = "ZmuO9knRBtvQOyqAVG13CgSqtvGl7ywVCd66MjpR";

        // Creating an input for the CSRF token
        const csrfInput = document.createElement("input");
        csrfInput.type = "hidden";
        csrfInput.name = "CRAFT_CSRF_TOKEN";
        csrfInput.value = csrfToken;
        form.appendChild(csrfInput);

        // Creating an input for the job ID (tracking number)
        const jobIdInput = document.createElement("input");
        jobIdInput.type = "text";
        jobIdInput.name = "jobId";
        jobIdInput.placeholder = "Maintrack Ref/Note No.";
        jobIdInput.value = trackingNumber; // Setting the value to the tracking number
        form.appendChild(jobIdInput);

        // Appending the form to the body
        document.body.appendChild(form);

        // Automatically submit the form
        form.submit();
    </script>
</body>
</html>

